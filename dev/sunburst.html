<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Sequences sunburst</title>
  <!--
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.min.js"></script>
  <script src="http://d3js.org/d3.v4.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dc/2.1.9/dc.min.js"></script>
  -->
  <link rel="stylesheet" type="text/css"
        href="https://fonts.googleapis.com/css?family=Open+Sans:400,600">
  <link rel="stylesheet" type="text/css" href="sequences.css"/>
  <link rel="stylesheet" href="../dist/mapd3.css">
</head>
<body>


<div class="chart chart1"></div>
<div class="chart chart0"></div>
<div class="chart chart2"></div>
<div class="chart chart3"></div>
<div class="chart chart4"></div>
<div class="chart chart5"></div>
<script src="../dist/mapd3.js"></script>

<script>

  const keyType = "number" // time, number, string
  const sunburst = "sunburst" // line, area, stackedArea, bar, stackedBar
  const area = "area" // line, area, stackedArea, bar, stackedBar
  const stackedArea = "stackedArea" // line, area, stackedArea, bar, stackedBar
  const line = "line" // line, area, stackedArea, bar, stackedBar
  const bar = "line" // line, area, stackedArea, bar, stackedBar
   const filename = "visit-sequences-full-2.csv"
  //const filename = "Lekagul Sensor Data.csv"
 // const filename = "lite.csv"

  const dataManager = mapd3.DataManager()
    .setConfig({
      keyType,
      range: [-100, 1000],
      pointCount: 200,
      groupCount: 2,
      lineCount: 4,
      margin: {
        top: 300,
        right: 300
      }
    });

  const data = dataManager.generateTestDataset();

  //console.log(data);

  dataManager.loadCSVData(filename)
    .then(csv => {

      //lineChart0.setData(lineChart0.csvToJson(csv));
      sunburstChart0.setData(sunburstChart0.csvToJson(csv));
      //areaChart0.setData(areaChart0.csvToJson(csv));
      //stackedAreaChart0.setData(stackedAreaChart0.csvToJson(csv));

      /*
      Timestamp,car-id,car-type,gate-name
      2015-05-01 00:43:28,20154301124328-262,4,entrance3
      2015-05-01 01:03:48,20154301124328-262,4,general-gate1
      2015-05-01 01:06:24,20154301124328-262,4,ranger-stop2
      2015-05-01 01:09:25,20154301124328-262,4,ranger-stop0
       */

      //var ndx = crossfilter(csv);
      //var all = ndx.groupAll();

      //var carTypeDim = ndx.dimension(function (d) { return d["car-type"]; });
      //var gateNameDim = ndx.dimension(function (d) { return d["gate-name"]; });
    })
    .catch(error => {
      console.log(error);
    })


  const lineChartNode0 = document.querySelector(".chart0");
  const lineChart0 = mapd3.Chart(lineChartNode0)
    .setConfig({
      keyType,
      chartType: line
    })
    .setData(data)

  const sunburstChartNode0 = document.querySelector(".chart1");
  const sunburstChart0 = mapd3.Sunburst(sunburstChartNode0)
    .setConfig({
      keyType,
      //chartType: sunburst
    })
    //.setData(data)

  const areaChartNode0 = document.querySelector(".chart2");
  const areaChart0 = mapd3.Chart(areaChartNode0)
    .setConfig({
      keyType,
      chartType: area
    })
    //.setData(data)

  const chartNode3 = document.querySelector(".chart3");
  const chart3 = mapd3.Chart(chartNode3)
    .setConfig({
      keyType,
      chartType: stackedArea
    })
    //.setData(data)

  const stackedAreaChartNode0 = document.querySelector(".chart4");
  const stackedAreaChart0 = mapd3.Chart(stackedAreaChartNode0)
    .setConfig({
      keyType,
      chartType: stackedArea
    })
    //.setData(data)

</script>


<script type="text/javascript" src="js/d3.js"></script>
<script type="text/javascript" src="js/crossfilter.js"></script>
<script type="text/javascript" src="js/dc.js"></script>

<!--<script type="text/javascript" src="sequences.js"></script>-->
<script type="text/javascript">
  // Hack to make this example display correctly in an iframe on bl.ocks.org
  //d3.select(self.frameElement).style("height", "700px");
</script>
</body>
</html>
